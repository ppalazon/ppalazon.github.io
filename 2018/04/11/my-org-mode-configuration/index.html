<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>My org mode configuration  &middot; Sobremesa en Milliways</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="org, ">


<meta property="og:title" content="My org mode configuration  &middot; Sobremesa en Milliways ">
<meta property="og:site_name" content="Sobremesa en Milliways"/>
<meta property="og:url" content="https://ppalazon.github.io/2018/04/11/my-org-mode-configuration/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2018-04-11T00:00:00&#43;02:00" />
<meta property="og:article:modified_time" content="2018-04-11T00:00:00&#43;02:00" />

  
    
<meta property="og:article:tag" content="org">
    
  

  
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@ppalazon" />
<meta name="twitter:creator" content="@ppalazon" />
<meta name="twitter:title" content="My org mode configuration" />
<meta name="twitter:description" content="" />
<meta name="twitter:url" content="https://ppalazon.github.io/2018/04/11/my-org-mode-configuration/" />
<meta name="twitter:domain" content="https://ppalazon.github.io">
  

  
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "My org mode configuration",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2018-04-11",
    "description": "",
    "wordCount": 2798
  }
</script>
  



<link rel="canonical" href="https://ppalazon.github.io/2018/04/11/my-org-mode-configuration/" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://ppalazon.github.io/touch-icon-144-precomposed.png">
<link rel="icon" href="https://ppalazon.github.io/favicon.png">
<meta name="generator" content="Hugo 0.48" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.2/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->




    
    








    
    






<link rel="stylesheet" href="https://ppalazon.github.io/css/bundle.min.fa2612051fd3a9e9dc21c1f78b67fe347adc6248d2d7e589b66c571cf81233b2506a79f76f86527d6b705b3e79cc78d4e57a76cc31058dbd892e3b38b3b65d28.css" integrity="sha512-&#43;iYSBR/TqencIcH3i2f&#43;NHrcYkjS1&#43;WJtmxXHPgSM7JQann3b4ZSfWtwWz55zHjU5Xp2zDEFjb2JLjs4s7ZdKA==">

</head>
<body data-ng-app="myapp" data-ng-controller="MyController" data-ng-mouseleave="MouseLeave($event)">
    <header id="main-header">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        
          
          <a class="navbar-brand-img" href="https://ppalazon.github.io/">
            <img alt="Sobremesa en Milliways" src="https://ppalazon.github.io/img/sobremesa-en-milliways.png">
            
          </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            <li class="">
              
                <a href="https://ppalazon.github.io/post/" >
                  
                  Blog
                </a>
              
            </li>
            
            <li class="">
              
                <a href="https://ppalazon.github.io/about/me/" >
                  
                  About
                </a>
              
            </li>
            
            
              
          </ul>
        </div>
        
      </div>
    </nav>
  </header>





<div class="container">
  <div class="row">
    <div class="col-sm-9">


      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  <div class="title-metas text-center">

    <h1>My org mode configuration
</h1>

    <div class="metas">
<small>
  <i class="fa fa-calendar"></i>
  <time datetime="2018-04-11">11 Apr, 2018</time>
</small>


  <small>
    &middot; by [Pablo Palaz√≥n]
  
  &middot; Read in about 14 min
  &middot; (2798 words)
  &middot; 
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=My%20org%20mode%20configuration&amp;url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f&amp;title=My%20org%20mode%20configuration" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=My%20org%20mode%20configuration&amp;body=Check out this site https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  </small>

<div class="margin-10">
  <i class="fa fa-tags"></i>
  
  <a href="https://ppalazon.github.io/tags/org" class="label label-primary">org</a>
  


</div>

<br>
</div>

  </div>
</div>


      <div class="content">
  

<div class="ox-hugo-toc toc">
<div></div>

<div class="heading">Table of Contents</div>

<ul>
<li><a href="#personal-org-mode-configuration">Personal <code>org-mode</code> configuration</a></li>
</ul>

<p></div>
<!--endtoc--></p>

<p>This is my personal list with most used commands on <code>org-mode</code>. It&rsquo;s
contains snippets, shortcuts and configurations.</p>

<h2 id="personal-org-mode-configuration">Personal <code>org-mode</code> configuration</h2>

<pre><code class="language-lisp">(global-set-key (kbd &quot;&lt;f12&gt;&quot;) 'org-agenda)
(global-set-key (kbd &quot;&lt;f5&gt;&quot;) 'bh/org-todo)
(global-set-key (kbd &quot;&lt;S-f5&gt;&quot;) 'bh/widen)
(global-set-key (kbd &quot;&lt;f7&gt;&quot;) 'bh/set-truncate-lines)
;; &lt;f8&gt; is for neotree-toggle
;;(global-set-key (kbd &quot;&lt;f8&gt;&quot;) 'org-cycle-agenda-files)
(global-set-key (kbd &quot;&lt;f9&gt; &lt;f9&gt;&quot;) 'bh/show-org-agenda)
(global-set-key (kbd &quot;&lt;f9&gt; b&quot;) 'bbdb)
(global-set-key (kbd &quot;&lt;f9&gt; c&quot;) 'calendar)
(global-set-key (kbd &quot;&lt;f9&gt; f&quot;) 'boxquote-insert-file)
(global-set-key (kbd &quot;&lt;f9&gt; g&quot;) 'gnus)
(global-set-key (kbd &quot;&lt;f9&gt; h&quot;) 'bh/hide-other)
(global-set-key (kbd &quot;&lt;f9&gt; n&quot;) 'bh/toggle-next-task-display)

(global-set-key (kbd &quot;&lt;f9&gt; I&quot;) 'bh/punch-in)
(global-set-key (kbd &quot;&lt;f9&gt; O&quot;) 'bh/punch-out)

(global-set-key (kbd &quot;&lt;f9&gt; o&quot;) 'bh/make-org-scratch)

(global-set-key (kbd &quot;&lt;f9&gt; r&quot;) 'boxquote-region)
(global-set-key (kbd &quot;&lt;f9&gt; s&quot;) 'bh/switch-to-scratch)

(global-set-key (kbd &quot;&lt;f9&gt; t&quot;) 'bh/insert-inactive-timestamp)
(global-set-key (kbd &quot;&lt;f9&gt; T&quot;) 'bh/toggle-insert-inactive-timestamp)

(global-set-key (kbd &quot;&lt;f9&gt; v&quot;) 'visible-mode)
(global-set-key (kbd &quot;&lt;f9&gt; l&quot;) 'org-toggle-link-display)
(global-set-key (kbd &quot;&lt;f9&gt; SPC&quot;) 'bh/clock-in-last-task)
(global-set-key (kbd &quot;C-&lt;f9&gt;&quot;) 'previous-buffer)
(global-set-key (kbd &quot;M-&lt;f9&gt;&quot;) 'org-toggle-inline-images)
(global-set-key (kbd &quot;C-x n r&quot;) 'narrow-to-region)
(global-set-key (kbd &quot;C-&lt;f10&gt;&quot;) 'next-buffer)
(global-set-key (kbd &quot;&lt;f11&gt;&quot;) 'org-clock-goto)
(global-set-key (kbd &quot;C-&lt;f11&gt;&quot;) 'org-clock-in)
(global-set-key (kbd &quot;C-s-&lt;f12&gt;&quot;) 'bh/save-then-publish)
(global-set-key (kbd &quot;C-c c&quot;) 'org-capture)

(global-set-key (kbd &quot;C-c 0&quot;) (lambda () (interactive) (find-file &quot;~/org/capture/refile.org&quot;)))
(global-set-key (kbd &quot;C-c 9&quot;) (lambda () (interactive) (find-file &quot;~/org/capture/notes.org&quot;)))
(global-set-key (kbd &quot;C-c 8&quot;) (lambda () (interactive) (find-file &quot;~/org/capture/gtd.org&quot;)))

(use-package org
  :ensure t
  :mode (&quot;\\.org\\'&quot; . org-mode)
  :bind ((&quot;C-c l&quot; . org-store-link)
         (&quot;C-c c&quot; . org-capture)
         (&quot;C-c a&quot; . org-agenda)
         (&quot;&lt;f7&gt;&quot; . org-agenda)
         (&quot;C-c b&quot; . org-iswitchb)
         (&quot;C-c C-w&quot; . org-refile)
         (&quot;C-c j&quot; . org-clock-goto)
         (&quot;C-c C-x C-o&quot; . org-clock-out)
         (&quot;M-&lt;f9&gt;&quot; . org-toggle-inline-images))
  :config
  (progn
    ;; org-habit
    (require 'org-habit)
    (require 'org-protocol)
    (require 'org-id)
    (require 'ox-latex)
    (require 'org-checklist)

    ;; The GTD part of this config is heavily inspired by
    ;; https://emacs.cafe/emacs/orgmode/gtd/2017/06/30/orgmode-gtd.html
    ;; http://doc.norang.ca/org-mode.html
    (setq org-directory &quot;~/org&quot;)
    (setq org-startup-indented t)
    (setq org-startup-folded 'content)
    (setq org-agenda-files (quote (&quot;~/org/capture&quot;
                                   &quot;~/org/work&quot;
                                   &quot;~/org/study&quot;)))
    (setq org-log-done 'time)
    (setq org-src-fontify-natively t)
    (setq org-use-speed-commands t)
    (setq org-capture-templates
          '((&quot;t&quot; &quot;Todo&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* TODO %?\n%U\n%a\n&quot; :clock-in t :clock-resume t)
            (&quot;h&quot; &quot;Hugo post&quot; entry (file+olp &quot;~/org/hugo/personal-blog.org&quot; &quot;Blog Ideas&quot;)
             (function org-hugo-new-subtree-post-capture-template)
             :date &quot;%U&quot;)
            (&quot;n&quot; &quot;note&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* %? :NOTE:\n%U\n%a\n&quot; :clock-in t :clock-resume t)
            (&quot;j&quot; &quot;Journal&quot; entry (file+datetree &quot;~/org/capture/journal.org&quot;)
             &quot;* %? \nEntered on %U\n&quot; :clock-in t :clock-resume t)
            (&quot;p&quot; &quot;Protocol&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* %^{Title}\nSource: %u, %c\n #+BEGIN_QUOTE\n%i\n#+END_QUOTE\n\n%?&quot;)
            (&quot;L&quot; &quot;Protocol Link&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* %? [[%:link][%(transform-square-brackets-to-round-ones \&quot;%:description\&quot;)]] \nCaptured On: %U&quot;)
            (&quot;m&quot; &quot;Meeting&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* MEETING %u about %? :MEETING:\n%U\nwith: &quot; :clock-in t :clock-resume t)
            (&quot;p&quot; &quot;Phone call&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* PHONE %? :PHONE:\n%U&quot; :clock-in t :clock-resume t)
            (&quot;a&quot; &quot;Habit&quot; entry (file &quot;~/org/capture/refile.org&quot;)
             &quot;* NEXT %?\n%U\n%a\nSCHEDULED: %(format-time-string \&quot;%&lt;&lt;%Y-%m-%d %a .+1d/3d&gt;&gt;\&quot;)\n:PROPERTIES:\n:STYLE: habit\n:REPEAT_TO_STATE: NEXT\n:END:\n&quot;)
            ))

    (setq org-refile-targets (quote ((nil :maxlevel . 1)
                                   (org-agenda-files :maxlevel . 1))))
    (setq org-todo-keywords '((sequence &quot;TODO(t)&quot; &quot;WAITING(w)&quot; &quot;|&quot; &quot;DONE(d)&quot; &quot;CANCELLED(c)&quot;)))
    (setq org-clock-persist t)
    (org-clock-persistence-insinuate)
    (setq org-time-clocksum-format '(:hours &quot;%d&quot; :require-hours t :minutes &quot;:%02d&quot; :require-minutes t))

    (setq org-file-apps (quote ((auto-mode . emacs)
                                 (&quot;\\.mm\\'&quot; . default)
                                 (&quot;\\.x?html?\\'&quot; . &quot;/usr/bin/firefox %s&quot;)
                                 (&quot;\\.pdf\\'&quot; . default))))

    (setq org-todo-keywords
          (quote ((sequence &quot;TODO(t)&quot; &quot;NEXT(n)&quot; &quot;|&quot; &quot;DONE(d)&quot;)
                  (sequence &quot;WAITING(w@/!)&quot; &quot;HOLD(h@/!)&quot; &quot;|&quot; &quot;CANCELLED(c@/!)&quot; &quot;PHONE&quot; &quot;MEETING&quot;))))

    (setq org-todo-keyword-faces
          (quote ((&quot;TODO&quot; :foreground &quot;red&quot; :weight bold)
                  (&quot;NEXT&quot; :foreground &quot;yellow&quot; :weight bold)
                  (&quot;DONE&quot; :foreground &quot;forest green&quot; :weight bold)
                  (&quot;WAITING&quot; :foreground &quot;orange&quot; :weight bold)
                  (&quot;HOLD&quot; :foreground &quot;magenta&quot; :weight bold)
                  (&quot;CANCELLED&quot; :foreground &quot;forest green&quot; :weight bold)
                  (&quot;MEETING&quot; :foreground &quot;forest green&quot; :weight bold)
                  (&quot;PHONE&quot; :foreground &quot;forest green&quot; :weight bold))))

    (setq org-use-fast-todo-selection t)
    (setq org-treat-S-cursor-todo-selection-as-state-change nil)

    (setq org-todo-state-tags-triggers
          (quote ((&quot;CANCELLED&quot; (&quot;CANCELLED&quot; . t))
                  (&quot;WAITING&quot; (&quot;WAITING&quot; . t))
                  (&quot;HOLD&quot; (&quot;WAITING&quot;) (&quot;HOLD&quot; . t))
                  (done (&quot;WAITING&quot;) (&quot;HOLD&quot;))
                  (&quot;TODO&quot; (&quot;WAITING&quot;) (&quot;CANCELLED&quot;) (&quot;HOLD&quot;))
                  (&quot;NEXT&quot; (&quot;WAITING&quot;) (&quot;CANCELLED&quot;) (&quot;HOLD&quot;))
                  (&quot;DONE&quot; (&quot;WAITING&quot;) (&quot;CANCELLED&quot;) (&quot;HOLD&quot;)))))

    ;; Do not dim blocked tasks
    (setq org-agenda-dim-blocked-tasks nil)

    ;; Compact the block agenda view
    (setq org-agenda-compact-blocks t)

    ;; Custom agenda command definitions
    (setq org-agenda-custom-commands
          (quote ((&quot;N&quot; &quot;Notes&quot; tags &quot;NOTE&quot;
                   ((org-agenda-overriding-header &quot;Notes&quot;)
                    (org-tags-match-list-sublevels t)))
                  (&quot;h&quot; &quot;Habits&quot; tags-todo &quot;STYLE=\&quot;habit\&quot;&quot;
                   ((org-agenda-overriding-header &quot;Habits&quot;)
                    (org-agenda-sorting-strategy
                     '(todo-state-down effort-up category-keep))))
                  (&quot; &quot; &quot;Agenda&quot;
                   ((agenda &quot;&quot; nil)
                    (tags &quot;REFILE&quot;
                          ((org-agenda-overriding-header &quot;Tasks to Refile&quot;)
                           (org-tags-match-list-sublevels nil)))
                    (tags-todo &quot;-CANCELLED/!&quot;
                               ((org-agenda-overriding-header &quot;Stuck Projects&quot;)
                                (org-agenda-skip-function 'bh/skip-non-stuck-projects)
                                (org-agenda-sorting-strategy
                                 '(category-keep))))
                    (tags-todo &quot;-HOLD-CANCELLED/!&quot;
                               ((org-agenda-overriding-header &quot;Projects&quot;)
                                (org-agenda-skip-function 'bh/skip-non-projects)
                                (org-tags-match-list-sublevels 'indented)
                                (org-agenda-sorting-strategy
                                 '(category-keep))))
                    (tags-todo &quot;-CANCELLED/!NEXT&quot;
                               ((org-agenda-overriding-header (concat &quot;Project Next Tasks&quot;
                                                                      (if bh/hide-scheduled-and-waiting-next-tasks
                                                                          &quot;&quot;
                                                                        &quot; (including WAITING and SCHEDULED tasks)&quot;)))
                                (org-agenda-skip-function 'bh/skip-projects-and-habits-and-single-tasks)
                                (org-tags-match-list-sublevels t)
                                (org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-sorting-strategy
                                 '(todo-state-down effort-up category-keep))))
                    (tags-todo &quot;-REFILE-CANCELLED-WAITING-HOLD/!&quot;
                               ((org-agenda-overriding-header (concat &quot;Project Subtasks&quot;
                                                                      (if bh/hide-scheduled-and-waiting-next-tasks
                                                                          &quot;&quot;
                                                                        &quot; (including WAITING and SCHEDULED tasks)&quot;)))
                                (org-agenda-skip-function 'bh/skip-non-project-tasks)
                                (org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-sorting-strategy
                                 '(category-keep))))
                    (tags-todo &quot;-REFILE-CANCELLED-WAITING-HOLD/!&quot;
                               ((org-agenda-overriding-header (concat &quot;Standalone Tasks&quot;
                                                                      (if bh/hide-scheduled-and-waiting-next-tasks
                                                                          &quot;&quot;
                                                                        &quot; (including WAITING and SCHEDULED tasks)&quot;)))
                                (org-agenda-skip-function 'bh/skip-project-tasks)
                                (org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-with-date bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-sorting-strategy
                                 '(category-keep))))
                    (tags-todo &quot;-CANCELLED+WAITING|HOLD/!&quot;
                               ((org-agenda-overriding-header (concat &quot;Waiting and Postponed Tasks&quot;
                                                                      (if bh/hide-scheduled-and-waiting-next-tasks
                                                                          &quot;&quot;
                                                                        &quot; (including WAITING and SCHEDULED tasks)&quot;)))
                                (org-agenda-skip-function 'bh/skip-non-tasks)
                                (org-tags-match-list-sublevels nil)
                                (org-agenda-todo-ignore-scheduled bh/hide-scheduled-and-waiting-next-tasks)
                                (org-agenda-todo-ignore-deadlines bh/hide-scheduled-and-waiting-next-tasks)))
                    (tags &quot;-REFILE/&quot;
                          ((org-agenda-overriding-header &quot;Tasks to Archive&quot;)
                           (org-agenda-skip-function 'bh/skip-non-archivable-tasks)
                           (org-tags-match-list-sublevels nil))))
                   nil))))

    ;; Resume clocking task when emacs is restarted
    (org-clock-persistence-insinuate)
    ;;
    ;; Show lot of clocking history so it's easy to pick items off the C-F11 list
    (setq org-clock-history-length 23)
    ;; Resume clocking task on clock-in if the clock is open
    (setq org-clock-in-resume t)
    ;; Change tasks to NEXT when clocking in
    (setq org-clock-in-switch-to-state 'bh/clock-in-to-next)
    ;; Separate drawers for clocking and logs
    (setq org-drawers (quote (&quot;PROPERTIES&quot; &quot;LOGBOOK&quot;)))
    ;; Save clock data and state changes and notes in the LOGBOOK drawer
    (setq org-clock-into-drawer t)
    ;; Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration
    (setq org-clock-out-remove-zero-time-clocks t)
    ;; Clock out when moving task to a done state
    (setq org-clock-out-when-done t)
    ;; Save the running clock and all clock history when exiting Emacs, load it on startup
    (setq org-clock-persist t)
    ;; Do not prompt to resume an active clock
    (setq org-clock-persist-query-resume nil)
    ;; Enable auto clock resolution for finding open clocks
    (setq org-clock-auto-clock-resolution (quote when-no-clock-is-running))
    ;; Include current clocking task in clock reports
    (setq org-clock-report-include-clocking-task t)
    ;; Sometimes I change tasks I'm clocking quickly - this removes clocked tasks with 0:00 duration
    (setq org-clock-out-remove-zero-time-clocks t)

    (setq bh/keep-clock-running nil)

    (defvar bh/organization-task-id &quot;23a80a21-516d-4c98-b9bb-528fdb0c2080&quot;)
    (add-hook 'org-clock-out-hook 'bh/clock-out-maybe 'append)
    (add-hook 'org-clock-out-hook 'bh/remove-empty-drawer-on-clock-out 'append)

    (setq org-time-stamp-rounding-minutes (quote (1 1)))
    (setq org-agenda-clock-consistency-checks
          (quote (:max-duration &quot;4:00&quot;
                                :min-duration 0
                                :max-gap 0
                                :gap-ok-around (&quot;4:00&quot;))))

    ;; Agenda clock report parameters
    (setq org-agenda-clockreport-parameter-plist
          (quote (:link t :maxlevel 5 :fileskip0 t :compact t :narrow 80)))

    ;; Set default column view headings: Task Effort Clock_Summary
    (setq org-columns-default-format &quot;%80ITEM(Task) %10Effort(Effort){:} %10CLOCKSUM&quot;)

    ;; global Effort estimate values
    ;; global STYLE property values for completion
    (setq org-global-properties (quote ((&quot;Effort_ALL&quot; . &quot;0:15 0:30 0:45 1:00 2:00 3:00 4:00 5:00 6:00 0:00&quot;)
                                        (&quot;STYLE_ALL&quot; . &quot;habit&quot;))))

    ;; Agenda log mode items to display (closed and state changes by default)
    (setq org-agenda-log-mode-items (quote (closed state)))

    (setq org-agenda-span 'day)

    ;; Disable default org-mode stuck project agenda
    (setq org-stuck-projects (quote (&quot;&quot; nil nil &quot;&quot;)))

    ;; Archive anything on * Archived Tasks
    (setq org-archive-mark-done nil)
    (setq org-archive-location &quot;%s_archive::* Archived Tasks&quot;)

    (setq org-link-abbrev-alist
          '((&quot;gmane&quot; . &quot;http://thread.gmane.org/%s&quot;)
            (&quot;google&quot; . &quot;https://www.google.com/search?q=%s&quot;)
            (&quot;arxiv&quot; . &quot;http://arxiv.org/abs/%s&quot;)
            (&quot;cds&quot; . &quot;https://cds.cern.ch/record/%s&quot;)
            (&quot;doi&quot; . &quot;http://dx.doi.org/%s&quot;)))

    (setq org-publish-project-alist
          '((&quot;org-notes&quot;
             :base-directory &quot;~/org/&quot;
             :base-extension &quot;org&quot;
             :publishing-directory &quot;~/public_html/&quot;
             :recursive t
             :makeindex t
             :auto-sitemap t
             :sitemap-filename &quot;index.org&quot;
             :sitemap-title &quot;Org Notes Sitemap&quot;
             :publishing-function org-html-publish-to-html
             :headline-levels 4             ; Just the default for this project.
             :auto-preamble t
             )
            (&quot;org-static&quot;
             :base-directory &quot;~/org/&quot;
             :base-extension &quot;css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf&quot;
             :publishing-directory &quot;~/public_html/&quot;
             :recursive t
             :publishing-function org-publish-attachment
             )
            (&quot;org&quot; :components (&quot;org-notes&quot; &quot;org-static&quot;))))

    ;; Latex configuration
    (setq org-latex-pdf-process
          '(&quot;xelatex -interaction nonstopmode %f&quot;
            &quot;xelatex -interaction nonstopmode %f&quot;))

    (setq org-latex-logfiles-extensions
          (quote (&quot;lof&quot; &quot;lot&quot; &quot;tex&quot; &quot;tex~&quot; &quot;aux&quot; &quot;idx&quot;
                  &quot;log&quot; &quot;out&quot; &quot;toc&quot; &quot;nav&quot; &quot;snm&quot; &quot;vrb&quot;
                  &quot;dvi&quot; &quot;fdb_latexmk&quot; &quot;blg&quot; &quot;brf&quot; &quot;fls&quot;
                  &quot;entoc&quot; &quot;ps&quot; &quot;spl&quot; &quot;bbl&quot;)))

    ;; https://orgmode.org/manual/CDLaTeX-mode.html#CDLaTeX-mode
    (add-hook 'org-mode-hook 'turn-on-org-cdlatex)

    (setq org-src-fontify-natively t)
    (setq org-latex-listings t)
    (setq org-export-coding-system 'utf-8)

    ;; ebooks using memoir
    (with-eval-after-load 'ox-latex
      (add-to-list 'org-latex-classes '(&quot;ebook&quot;
                                        &quot;\\documentclass[11pt, oneside]{memoir}
\\setstocksize{9in}{6in}
\\settrimmedsize{\\stockheight}{\\stockwidth}{*}
\\setlrmarginsandblock{2cm}{2cm}{*} % Left and right margin
\\setulmarginsandblock{2cm}{2cm}{*} % Upper and lower margin
\\checkandfixthelayout
\\usepackage{times}
\\usepackage[british]{babel}
\\usepackage[raggedright]{sidecap}
\\setsecheadstyle{\\normalfont \\raggedright \\textbf}
\\setsubsecheadstyle{\\normalfont \\raggedright \\emph}
\\usepackage[labelformat=empty, font=small]{caption}
\\usepackage{pdfpages}
\\usepackage[unicode=true, bookmarks=true,bookmarksnumbered=false,bookmarksopen=true,bookmarksopenlevel=1, breaklinks=true,pdfborder={0 0 0},backref=false,colorlinks=false,pdfborderstyle={/S/U/W .5}, allbordercolors {.8 .8 .8}] {hyperref}
\\pagestyle{myheadings}
\\setcounter{tocdepth}{0}
\\usepackage{ccicons}
\\OnehalfSpacing
\\usepackage[authoryear]{natbib}&quot;
                                        (&quot;\\chapter{%s}&quot; . &quot;\\chapter*{%s}&quot;)
                                        (&quot;\\section{%s}&quot; . &quot;\\section*{%s}&quot;)
                                        (&quot;\\subsection{%s}&quot; . &quot;\\subsection*{%s}&quot;)
                                        )))

    (setq org-ditaa-jar-path &quot;/opt/javatools/ditaa/ditaa0_9.jar&quot;)
    (setq org-plantuml-jar-path &quot;/opt/javatools/plantuml/plantuml.1.2018.7.jar&quot;)

    (add-hook 'org-babel-after-execute-hook 'bh/display-inline-images 'append)

                                        ; Make babel results blocks lowercase
    (setq org-babel-results-keyword &quot;results&quot;)

    ;; Org-babel configuration
    (org-babel-do-load-languages
     'org-babel-load-languages
     '((R . t)
       (org . t)
       (ditaa . t)
       (plantuml . t)
       (latex . t)
       (dot . t)
       (emacs-lisp . t)
       (gnuplot . t)
       (screen . nil)
       (shell . t)
       (sql . nil)
       (sqlite . t)
       (maxima . t)
       (cypher . t)))
    (setq org-confirm-babel-evaluate nil)
    (add-to-list 'org-src-lang-modes (quote (&quot;plantuml&quot; . fundamental)))

    ))

;; org-noter
(use-package org-noter
  :ensure t
  :config
  (require 'org-noter))

;; Inline images
(use-package org-download
  :ensure t
  :config
  (require 'org-download)
  (setq-default org-download-image-dir (concat org-directory &quot;/img&quot;))
  (setq org-image-actual-width nil)

  (defun do-org-show-all-inline-images ()
    (interactive)
    (org-display-inline-images t t))
  (global-set-key (kbd &quot;C-c C-x C v&quot;)
                  'do-org-show-all-inline-images))

;; Use htmlize
(use-package htmlize
  :ensure t
  :config
  (require 'htmlize))

(use-package org-inlinetask
  :bind (:map org-mode-map
              (&quot;C-c C-x t&quot; . org-inlinetask-insert-task))
  :after (org)
  :commands (org-inlinetask-insert-task))
(use-package org-bullets
  :ensure t
  :commands (org-bullets-mode)
  :init (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1))))

(use-package ox-hugo
  :ensure t            ;Auto-install the package from Melpa (optional)
  :after ox)
(use-package ox-hugo-auto-export) ;If you want the auto-exporting on file saves

;; Org mode
(defun transform-square-brackets-to-round-ones(string-to-transform)
  &quot;Transforms [ into ( and ] into ), other chars left unchanged.&quot;
  (concat
   (mapcar #'(lambda (c) (if (equal c ?\[) ?\( (if (equal c ?\]) ?\) c))) string-to-transform))
  )

(defun org-hugo-new-subtree-post-capture-template ()
  &quot;Returns `org-capture' template string for new Hugo post. See `org-capture-templates' for more information.&quot;
  (let* ((title (read-from-minibuffer &quot;Post Title: &quot;)) ;Prompt to enter the post title
         (fname (org-hugo-slug title))
         (date (plist-get org-capture-plist :date)))
    (mapconcat #'identity
               `(
                 ,(concat &quot;* TODO &quot; title)
                 &quot;:PROPERTIES:&quot;
                 ,(concat &quot;:EXPORT_FILE_NAME: &quot; fname)
                 ,(concat &quot;:EXPORT_DATE: &quot; date)
                 &quot;:EXPORT_HUGO_DRAFT: true&quot;
                 &quot;:END:&quot;
                 &quot;%?\n&quot;)          ;Place the cursor here finally
               &quot;\n&quot;)))

(defun bh/remove-empty-drawer-on-clock-out ()
  (interactive)
  (save-excursion
    (beginning-of-line 0)
    (org-remove-empty-drawer-at (point))))

(defun bh/hide-other ()
  (interactive)
  (save-excursion
    (org-back-to-heading 'invisible-ok)
    (hide-other)
    (org-cycle)
    (org-cycle)
    (org-cycle)))

(defun bh/set-truncate-lines ()
  &quot;Toggle value of truncate-lines and refresh window display.&quot;
  (interactive)
  (setq truncate-lines (not truncate-lines))
  ;; now refresh window display (an idiom from simple.el):
  (save-excursion
    (set-window-start (selected-window)
                      (window-start (selected-window)))))

(defun bh/make-org-scratch ()
  (interactive)
  (find-file &quot;/tmp/publish/scratch.org&quot;)
  (gnus-make-directory &quot;/tmp/publish&quot;))

(defun bh/switch-to-scratch ()
  (interactive)
  (switch-to-buffer &quot;*scratch*&quot;))

(defun bh/clock-in-to-next (kw)
  &quot;Switch a task from TODO to NEXT when clocking in.
Skips capture tasks, projects, and subprojects.
Switch projects and subprojects from NEXT back to TODO&quot;
  (when (not (and (boundp 'org-capture-mode) org-capture-mode))
    (cond
     ((and (member (org-get-todo-state) (list &quot;TODO&quot;))
           (bh/is-task-p))
      &quot;NEXT&quot;)
     ((and (member (org-get-todo-state) (list &quot;NEXT&quot;))
           (bh/is-project-p))
      &quot;TODO&quot;))))

(defun bh/find-project-task ()
  &quot;Move point to the parent (project) task if any&quot;
  (save-restriction
    (widen)
    (let ((parent-task (save-excursion (org-back-to-heading 'invisible-ok) (point))))
      (while (org-up-heading-safe)
        (when (member (nth 2 (org-heading-components)) org-todo-keywords-1)
          (setq parent-task (point))))
      (goto-char parent-task)
      parent-task)))

(defun bh/punch-in (arg)
  &quot;Start continuous clocking and set the default task to the
selected task.  If no task is selected set the Organization task
as the default task.&quot;
  (interactive &quot;p&quot;)
  (setq bh/keep-clock-running t)
  (if (equal major-mode 'org-agenda-mode)
      ;;
      ;; We're in the agenda
      ;;
      (let* ((marker (org-get-at-bol 'org-hd-marker))
             (tags (org-with-point-at marker (org-get-tags-at))))
        (if (and (eq arg 4) tags)
            (org-agenda-clock-in '(16))
          (bh/clock-in-organization-task-as-default)))
    ;;
    ;; We are not in the agenda
    ;;
    (save-restriction
      (widen)
      ; Find the tags on the current task
      (if (and (equal major-mode 'org-mode) (not (org-before-first-heading-p)) (eq arg 4))
          (org-clock-in '(16))
        (bh/clock-in-organization-task-as-default)))))

(defun bh/punch-out ()
  (interactive)
  (setq bh/keep-clock-running nil)
  (when (org-clock-is-active)
    (org-clock-out))
  (org-agenda-remove-restriction-lock))

(defun bh/clock-in-default-task ()
  (save-excursion
    (org-with-point-at org-clock-default-task
      (org-clock-in))))

(defun bh/clock-in-parent-task ()
  &quot;Move point to the parent (project) task if any and clock in&quot;
  (let ((parent-task))
    (save-excursion
      (save-restriction
        (widen)
        (while (and (not parent-task) (org-up-heading-safe))
          (when (member (nth 2 (org-heading-components)) org-todo-keywords-1)
            (setq parent-task (point))))
        (if parent-task
            (org-with-point-at parent-task
              (org-clock-in))
          (when bh/keep-clock-running
            (bh/clock-in-default-task)))))))

(defun bh/clock-in-organization-task-as-default ()
  (interactive)
  (org-with-point-at (org-id-find bh/organization-task-id 'marker)
    (org-clock-in '(16))))

(defun bh/clock-out-maybe ()
  (when (and bh/keep-clock-running
             (not org-clock-clocking-in)
             (marker-buffer org-clock-default-task)
             (not org-clock-resolving-clocks-due-to-idleness))
    (bh/clock-in-parent-task)))

(defun bh/clock-in-task-by-id (id)
  &quot;Clock in a task by id&quot;
  (org-with-point-at (org-id-find id 'marker)
    (org-clock-in nil)))

(defun bh/clock-in-last-task (arg)
  &quot;Clock in the interrupted task if there is one
Skip the default task and get the next one.
A prefix arg forces clock in of the default task.&quot;
  (interactive &quot;p&quot;)
  (let ((clock-in-to-task
         (cond
          ((eq arg 4) org-clock-default-task)
          ((and (org-clock-is-active)
                (equal org-clock-default-task (cadr org-clock-history)))
           (caddr org-clock-history))
          ((org-clock-is-active) (cadr org-clock-history))
          ((equal org-clock-default-task (car org-clock-history)) (cadr org-clock-history))
          (t (car org-clock-history)))))
    (widen)
    (org-with-point-at clock-in-to-task
      (org-clock-in nil))))

(defun bh/is-project-p ()
  &quot;Any task with a todo keyword subtask&quot;
  (save-restriction
    (widen)
    (let ((has-subtask)
          (subtree-end (save-excursion (org-end-of-subtree t)))
          (is-a-task (member (nth 2 (org-heading-components)) org-todo-keywords-1)))
      (save-excursion
        (forward-line 1)
        (while (and (not has-subtask)
                    (&lt; (point) subtree-end)
                    (re-search-forward &quot;^\*+ &quot; subtree-end t))
          (when (member (org-get-todo-state) org-todo-keywords-1)
            (setq has-subtask t))))
      (and is-a-task has-subtask))))

(defun bh/is-project-subtree-p ()
  &quot;Any task with a todo keyword that is in a project subtree.
Callers of this function already widen the buffer view.&quot;
  (let ((task (save-excursion (org-back-to-heading 'invisible-ok)
                              (point))))
    (save-excursion
      (bh/find-project-task)
      (if (equal (point) task)
          nil
        t))))

(defun bh/is-task-p ()
  &quot;Any task with a todo keyword and no subtask&quot;
  (save-restriction
    (widen)
    (let ((has-subtask)
          (subtree-end (save-excursion (org-end-of-subtree t)))
          (is-a-task (member (nth 2 (org-heading-components)) org-todo-keywords-1)))
      (save-excursion
        (forward-line 1)
        (while (and (not has-subtask)
                    (&lt; (point) subtree-end)
                    (re-search-forward &quot;^\*+ &quot; subtree-end t))
          (when (member (org-get-todo-state) org-todo-keywords-1)
            (setq has-subtask t))))
      (and is-a-task (not has-subtask)))))

(defun bh/is-subproject-p ()
  &quot;Any task which is a subtask of another project&quot;
  (let ((is-subproject)
        (is-a-task (member (nth 2 (org-heading-components)) org-todo-keywords-1)))
    (save-excursion
      (while (and (not is-subproject) (org-up-heading-safe))
        (when (member (nth 2 (org-heading-components)) org-todo-keywords-1)
          (setq is-subproject t))))
    (and is-a-task is-subproject)))

(defun bh/list-sublevels-for-projects-indented ()
  &quot;Set org-tags-match-list-sublevels so when restricted to a subtree we list all subtasks.
  This is normally used by skipping functions where this variable is already local to the agenda.&quot;
  (if (marker-buffer org-agenda-restrict-begin)
      (setq org-tags-match-list-sublevels 'indented)
    (setq org-tags-match-list-sublevels nil))
  nil)

(defun bh/list-sublevels-for-projects ()
  &quot;Set org-tags-match-list-sublevels so when restricted to a subtree we list all subtasks.
  This is normally used by skipping functions where this variable is already local to the agenda.&quot;
  (if (marker-buffer org-agenda-restrict-begin)
      (setq org-tags-match-list-sublevels t)
    (setq org-tags-match-list-sublevels nil))
  nil)

(defvar bh/hide-scheduled-and-waiting-next-tasks t)

(defun bh/toggle-next-task-display ()
  (interactive)
  (setq bh/hide-scheduled-and-waiting-next-tasks (not bh/hide-scheduled-and-waiting-next-tasks))
  (when  (equal major-mode 'org-agenda-mode)
    (org-agenda-redo))
  (message &quot;%s WAITING and SCHEDULED NEXT Tasks&quot; (if bh/hide-scheduled-and-waiting-next-tasks &quot;Hide&quot; &quot;Show&quot;)))

(defun bh/skip-stuck-projects ()
  &quot;Skip trees that are not stuck projects&quot;
  (save-restriction
    (widen)
    (let ((next-headline (save-excursion (or (outline-next-heading) (point-max)))))
      (if (bh/is-project-p)
          (let* ((subtree-end (save-excursion (org-end-of-subtree t)))
                 (has-next ))
            (save-excursion
              (forward-line 1)
              (while (and (not has-next) (&lt; (point) subtree-end) (re-search-forward &quot;^\\*+ NEXT &quot; subtree-end t))
                (unless (member &quot;WAITING&quot; (org-get-tags-at))
                  (setq has-next t))))
            (if has-next
                nil
              next-headline)) ; a stuck project, has subtasks but no next task
        nil))))

(defun bh/skip-non-stuck-projects ()
  &quot;Skip trees that are not stuck projects&quot;
  ;; (bh/list-sublevels-for-projects-indented)
  (save-restriction
    (widen)
    (let ((next-headline (save-excursion (or (outline-next-heading) (point-max)))))
      (if (bh/is-project-p)
          (let* ((subtree-end (save-excursion (org-end-of-subtree t)))
                 (has-next ))
            (save-excursion
              (forward-line 1)
              (while (and (not has-next) (&lt; (point) subtree-end) (re-search-forward &quot;^\\*+ NEXT &quot; subtree-end t))
                (unless (member &quot;WAITING&quot; (org-get-tags-at))
                  (setq has-next t))))
            (if has-next
                next-headline
              nil)) ; a stuck project, has subtasks but no next task
        next-headline))))

(defun bh/skip-non-projects ()
  &quot;Skip trees that are not projects&quot;
  ;; (bh/list-sublevels-for-projects-indented)
  (if (save-excursion (bh/skip-non-stuck-projects))
      (save-restriction
        (widen)
        (let ((subtree-end (save-excursion (org-end-of-subtree t))))
          (cond
           ((bh/is-project-p)
            nil)
           ((and (bh/is-project-subtree-p) (not (bh/is-task-p)))
            nil)
           (t
            subtree-end))))
    (save-excursion (org-end-of-subtree t))))

(defun bh/skip-non-tasks ()
  &quot;Show non-project tasks.
Skip project and sub-project tasks, habits, and project related tasks.&quot;
  (save-restriction
    (widen)
    (let ((next-headline (save-excursion (or (outline-next-heading) (point-max)))))
      (cond
       ((bh/is-task-p)
        nil)
       (t
        next-headline)))))

(defun bh/skip-project-trees-and-habits ()
  &quot;Skip trees that are projects&quot;
  (save-restriction
    (widen)
    (let ((subtree-end (save-excursion (org-end-of-subtree t))))
      (cond
       ((bh/is-project-p)
        subtree-end)
       ((org-is-habit-p)
        subtree-end)
       (t
        nil)))))

(defun bh/skip-projects-and-habits-and-single-tasks ()
  &quot;Skip trees that are projects, tasks that are habits, single non-project tasks&quot;
  (save-restriction
    (widen)
    (let ((next-headline (save-excursion (or (outline-next-heading) (point-max)))))
      (cond
       ((org-is-habit-p)
        next-headline)
       ((and bh/hide-scheduled-and-waiting-next-tasks
             (member &quot;WAITING&quot; (org-get-tags-at)))
        next-headline)
       ((bh/is-project-p)
        next-headline)
       ((and (bh/is-task-p) (not (bh/is-project-subtree-p)))
        next-headline)
       (t
        nil)))))

(defun bh/skip-project-tasks-maybe ()
  &quot;Show tasks related to the current restriction.
When restricted to a project, skip project and sub project tasks, habits, NEXT tasks, and loose tasks.
When not restricted, skip project and sub-project tasks, habits, and project related tasks.&quot;
  (save-restriction
    (widen)
    (let* ((subtree-end (save-excursion (org-end-of-subtree t)))
           (next-headline (save-excursion (or (outline-next-heading) (point-max))))
           (limit-to-project (marker-buffer org-agenda-restrict-begin)))
      (cond
       ((bh/is-project-p)
        next-headline)
       ((org-is-habit-p)
        subtree-end)
       ((and (not limit-to-project)
             (bh/is-project-subtree-p))
        subtree-end)
       ((and limit-to-project
             (bh/is-project-subtree-p)
             (member (org-get-todo-state) (list &quot;NEXT&quot;)))
        subtree-end)
       (t
        nil)))))

(defun bh/skip-project-tasks ()
  &quot;Show non-project tasks.
Skip project and sub-project tasks, habits, and project related tasks.&quot;
  (save-restriction
    (widen)
    (let* ((subtree-end (save-excursion (org-end-of-subtree t))))
      (cond
       ((bh/is-project-p)
        subtree-end)
       ((org-is-habit-p)
        subtree-end)
       ((bh/is-project-subtree-p)
        subtree-end)
       (t
        nil)))))

(defun bh/skip-non-project-tasks ()
  &quot;Show project tasks.
Skip project and sub-project tasks, habits, and loose non-project tasks.&quot;
  (save-restriction
    (widen)
    (let* ((subtree-end (save-excursion (org-end-of-subtree t)))
           (next-headline (save-excursion (or (outline-next-heading) (point-max)))))
      (cond
       ((bh/is-project-p)
        next-headline)
       ((org-is-habit-p)
        subtree-end)
       ((and (bh/is-project-subtree-p)
             (member (org-get-todo-state) (list &quot;NEXT&quot;)))
        subtree-end)
       ((not (bh/is-project-subtree-p))
        subtree-end)
       (t
        nil)))))

(defun bh/skip-projects-and-habits ()
  &quot;Skip trees that are projects and tasks that are habits&quot;
  (save-restriction
    (widen)
    (let ((subtree-end (save-excursion (org-end-of-subtree t))))
      (cond
       ((bh/is-project-p)
        subtree-end)
       ((org-is-habit-p)
        subtree-end)
       (t
        nil)))))

(defun bh/skip-non-subprojects ()
  &quot;Skip trees that are not projects&quot;
  (let ((next-headline (save-excursion (outline-next-heading))))
    (if (bh/is-subproject-p)
        nil
      next-headline)))

(defun bh/skip-non-archivable-tasks ()
  &quot;Skip trees that are not available for archiving&quot;
  (save-restriction
    (widen)
    ;; Consider only tasks with done todo headings as archivable candidates
    (let ((next-headline (save-excursion (or (outline-next-heading) (point-max))))
          (subtree-end (save-excursion (org-end-of-subtree t))))
      (if (member (org-get-todo-state) org-todo-keywords-1)
          (if (member (org-get-todo-state) org-done-keywords)
              (let* ((daynr (string-to-number (format-time-string &quot;%d&quot; (current-time))))
                     (a-month-ago (* 60 60 24 (+ daynr 1)))
                     (last-month (format-time-string &quot;%Y-%m-&quot; (time-subtract (current-time) (seconds-to-time a-month-ago))))
                     (this-month (format-time-string &quot;%Y-%m-&quot; (current-time)))
                     (subtree-is-current (save-excursion
                                           (forward-line 1)
                                           (and (&lt; (point) subtree-end)
                                                (re-search-forward (concat last-month &quot;\\|&quot; this-month) subtree-end t)))))
                (if subtree-is-current
                    subtree-end ; Has a date in this month or last month, skip it
                  nil))  ; available to archive
            (or subtree-end (point-max)))
        next-headline))))

(defun bh/display-inline-images ()
  (condition-case nil
      (org-display-inline-images)
    (error nil)))
</code></pre>

</div>


      <footer>
  
<span class="share-box">Share this on:
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-facebook-official "></i></a>

    <a href="https://twitter.com/intent/tweet?text=My%20org%20mode%20configuration&amp;url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-twitter"></i></a>

    <a href="https://plus.google.com/share?url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-google-plus"></i></a>

    <a href="http://www.reddit.com/submit?url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-reddit"></i></a>

    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f&amp;title=My%20org%20mode%20configuration" onclick="window.open(this.href, 'mywin',
'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"><i class="fa fa-linkedin"></i></a>

    <a href="mailto:?subject=My%20org%20mode%20configuration&amp;body=Check out this site https%3a%2f%2fppalazon.github.io%2f2018%2f04%2f11%2fmy-org-mode-configuration%2f" data-proofer-ignore=""><i class="fa fa-envelope"></i></a>
  </span>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      
  
    <nav><ul class="pager">
    
        <li class="previous">
          <a href="https://ppalazon.github.io/2015/02/04/character-encoding-files/" title="Character encoding files">
            <span aria-hidden="true">&larr;</span>Previous
          </a>
        </li>
    

    
      <li class="next">
        <a href="https://ppalazon.github.io/2015/07/15/guake-base-16-color/" title="Guake Base 16 Color">
            Next <span aria-hidden="true">&rarr;</span>
        </a>
      </li>
    
    </ul> </nav>
  


</div>

  <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
  
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;

    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//ppalazon.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


</div>

</footer>

    </div>
    
      <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3">
        <div>
  
    <div class="section">
      <header><div class="title">TableOfContents</div></header>
      <div class="list-default"><nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#personal-org-mode-configuration">Personal <code>org-mode</code> configuration</a></li>
</ul></li>
</ul>
</nav></div>
    </div>
    

    <div class="section">
      <header><div class="title"><b>Latest Posts</b></div></header>
      <div class="content">
        <ul>
        
          <li>
          <a href="https://ppalazon.github.io/2018/04/11/testing-ox-hugo/">Testing ox-hugo</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/2013/01/24/multi-environment-maven-war-generation/">Multi-environment maven war generation</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/1/01/01/starting-rust-programming-on-emacs/">Starting rust programming on Emacs</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/2018/04/11/first-post-from-ox-hugo/">First post from ox-hugo</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/2015/07/15/guake-base-16-color/">Guake Base 16 Color</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/2018/04/11/my-org-mode-configuration/">My org mode configuration</a>
          </li>
        
          <li>
          <a href="https://ppalazon.github.io/2015/02/04/character-encoding-files/">Character encoding files</a>
          </li>
        
        </ul>
      </div>
    </div>

    
      
      
      <div class="section taxonomies">
        <header><div class="title"><b>tag</b></div></header>

        <div class="content">
          <ul>
            <li><a href="https://ppalazon.github.io/tags/org">org</a></li><li><a href="https://ppalazon.github.io/tags/base16">base16</a></li><li><a href="https://ppalazon.github.io/tags/encoding">encoding</a></li><li><a href="https://ppalazon.github.io/tags/guake">guake</a></li><li><a href="https://ppalazon.github.io/tags/hugo">hugo</a></li><li><a href="https://ppalazon.github.io/tags/java">java</a></li><li><a href="https://ppalazon.github.io/tags/maven">maven</a></li><li><a href="https://ppalazon.github.io/tags/me">me</a></li><li><a href="https://ppalazon.github.io/tags/ppalazon">ppalazon</a></li><li><a href="https://ppalazon.github.io/tags/rust">rust</a></li>
          </ul>
        </div>
      </div>
      
    
      
      
    

</div>

      </div>
    
  </div>
</div>
    
<footer class="footer hidden-print">
  <div class="container">
    <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <div class="pull-left">
  <a class="toplink" href="javascript:" id="return-to-top">back to top</a>
</div>
<div class="pull-right">

<a href="https://ppalazon.github.io/categories">Categories</a> 

<a href="https://ppalazon.github.io/tags">Tags</a> 

</div>

        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 text-center">
              
    
<div class="container footline">
    <small>
  code with <i class='fa fa-heart'></i> and a lot of <i class='fa fa-coffee'></i>

</small>
</div>


    
<div class="container copyright">
    <small>
  CC BY-NC-ND 3.0

  </small>
</div>



        </div>
    </div>
  </div>
</footer>

    

<script src="//s3.amazonaws.com/mailmunch/static/site.js" id="mailmunch-script" data-mailmunch-site-id="" async="async"></script>



<script src="//load.sumome.com/" data-sumo-site-id="" async="async"></script>











<script>
var ENABLE_POPOVER = "", 
EXPIRE_COOKIE = "", 
SHOW_MODAL_TIMEOUT = "", 
MOUSE_LEAVE = "", 
MODAL_SIZE = "", 
POST_URL = "", 
SIGNUP_HEADER = "",
HEADER_IMAGE = "",
IMG_DESCRIPTION = "",
SIGNUP_TEXT = "",
INPUT_PLACEHOLDER = "",
SUBMIT_BUTTON = "",
SUCCESS_MESSAGE = "",
ERROR_MESSAGE = "",
OPTIN = "",
COOKIE_NAME = "",
CONTENTLANGUAGE = ""; 
</script>







<script  src="https://ppalazon.github.io/js/bundle.min.a0761bf8598edda2bb2c0e348a3160c418f2bc30908f40740ee7f30dabbdeed27d82ee58e16400badd1ae84ce7be7ce10702c9be216abe5de1cb497de995e850.js" integrity="sha512-oHYb&#43;FmO3aK7LA40ijFgxBjyvDCQj0B0DufzDau97tJ9gu5Y4WQAut0a6EznvnzhBwLJviFqvl3hy0l96ZXoUA=="></script>



<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js"></script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    for(var all in MathJax.Hub.getAllJax()) {
        all.SourceElement().parentNode.className += ' has-jax';

    }
});
</script>





  </body>
</html>

